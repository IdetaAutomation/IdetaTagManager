___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Ideta",
  "categories": ["CHAT", "MARKETING"],
  "brand": {
    "id": "brand_dummy",
    "displayName": "",
    "thumbnail": "data:image/png;base64,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\u003d\u003d"
  },
  "description": "Ideta helps you get leads from your website.",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "LABEL",
    "name": "Label Input Bot Id",
    "displayName": "Enter your chatbot script URL here"
  },
  {
    "type": "TEXT",
    "name": "url",
    "displayName": "You can find it in the publish section",
    "simpleValueType": true
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

const injectScript = require('injectScript');
const queryPermission = require('queryPermission');
const setInWindow = require('setInWindow');
const encodeUri = require('encodeUri');
const logToConsole = require('logToConsole');
const JSON = require('JSON');
logToConsole("data : ", JSON.stringify(data));

const url = data.url;
const onSuccess = () => {
  data.gtmOnSuccess();
};

logToConsole("url : ", url);

const onFailure = () => {
  data.gtmOnFailure();
};

if (queryPermission('inject_script', url)) {
  injectScript(url, onSuccess, onFailure);
} else {
  data.gtmOnFailure();
}


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": []
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://firebasestorage.googleapis.com/v0/b/ideta-prod.appspot.com/\*"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 15/04/2021, 10:49:18


